<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Gestión de Invitados</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&family=Playfair+Display:wght@600;700&family=Great+Vibes&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles/main.css"/>
</head>
<body class="admin-body">
  <div class="admin-panel">
    <header class="admin-header">
      <img src="/assets/GA.png" alt="GA" class="admin-logo"/>
      <h1 class="admin-title">Gestión de Invitados</h1>
      <p class="admin-subtitle">Crear y seguir confirmaciones</p>
    </header>

    <section id="newGuest" class="card-section">
      <div class="section-head">
        <h2 class="section-title">Nuevo invitado</h2>
      </div>
      <form id="formNewGuest" class="guest-form">
        <div class="field">
          <label for="fullName" class="field-label">Nombre completo</label>
          <input id="fullName" required placeholder="Ej: Juan Pérez"/>
        </div>
        <button class="btn-principal" type="submit">+ Generar link</button>
      </form>
    </section>

    <section id="listSection" class="card-section">
      <div class="section-head">
        <h2 class="section-title" style="margin:0">Listado</h2>
        <div class="table-tools">
          <div class="legend">
            <span class="state yes">Sí</span>
            <span class="state no">No</span>
            <span class="state null">Pend.</span>
          </div>
          <input id="searchInput" placeholder="Buscar..." class="search-input" />
          <div class="data-actions" role="group" aria-label="Acciones de datos">
            <button id="refreshBtn" class="mini-btn outline" title="Refrescar" aria-label="Refrescar lista">⟳ <span class="btn-text">Refrescar</span></button>
            <button id="exportBtn" class="mini-btn outline" title="Exportar CSV" aria-label="Exportar CSV">⇩ <span class="btn-text">CSV</span></button>
          </div>
        </div>
      </div>
      <div class="table-wrapper">
        <table id="guestsTable" class="pretty-table">
          <thead>
          <tr><th>Nombre</th><th>Link</th><th>Asistencia</th><th>Hospedaje</th><th>Acciones</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div id="totals" style="margin-top:10px; font-size:.75rem; letter-spacing:.5px; color:#4e3d2b;"></div>
    </section>

  <footer class="admin-footer">© 2025 · Desarrollado por Guillermo García Amoni</footer>
  </div>

  <script src="/js/env.js"></script>
  <script src="/js/supabaseClient.js"></script>
  <script src="/js/admin.js"></script>
</body>
</html>
